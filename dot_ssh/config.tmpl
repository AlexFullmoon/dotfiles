AddKeysToAgent yes
IgnoreUnknown UseKeychain,WarnWeakCrypto
{{- if eq .chezmoi.os "darwin" }}
UseKeychain yes
{{- end }}

Host gitea
	HostName git.moonlightwell.ru
	Port 22
	User git
	IdentityFile {{ .chezmoi.homeDir }}/.ssh/gitea
	IdentitiesOnly yes

Host github.com
	HostName github.com
	User git
	IdentityFile {{ .chezmoi.homeDir }}/.ssh/github
	IdentitiesOnly yes

Host router
	User fullmoon
	HostName 192.168.88.1
	Port 52022
	IdentityFile {{ .chezmoi.homeDir }}/.ssh/moonlight

{{- if ne .chezmoi.os "windows" }}

Match Originalhost moonlightwell Exec "! ifconfig | grep 192.168.88"
	HostName 77.123.249.79
Match Originalhost moonlightwell-direct Exec "! ifconfig | grep 192.168.88"
	HostName 77.123.249.79
{{- end }}

Host moonlightwell
 	RemoteCommand /usr/bin/zellij attach -c {{ .chezmoi.hostname }}
	VisualHostKey yes

Host moonlightwell moonlightwell-direct
	User root
	HostName 192.168.88.99
	Port 22376
	IdentityFile {{ .chezmoi.homeDir }}/.ssh/moonlightwell
	SendEnv LANG LC_*
	SetEnv TERM=xterm-256color
	RequestTTY yes
	WarnWeakCrypto no

{{- if ne .chezmoi.os "windows" }}

Match Originalhost borgbackup Exec "! ifconfig | grep 192.168.88"
	HostName 77.123.249.79
{{- end }}

Host borgbackup
	User borg
	HostName 192.168.88.99
	Port 22375
	IdentityFile /var/home/fullmoon/.ssh/shapeshifter

Host rpi
	User rpi
	HostName 192.168.88.100
	Port 22
	IdentityFile {{ .chezmoi.homeDir }}/.ssh/rpi
	VisualHostKey yes

Host aeza
	RemoteCommand /root/.cargo/bin/zellij attach -c {{ .chezmoi.hostname }}
	VisualHostKey yes

Host aeza aeza-direct
	User root
	HostName 89.208.103.40
	Port 22376
	IdentityFile {{ .chezmoi.homeDir }}/.ssh/aeza
	SetEnv TERM=xterm-256color
	RequestTTY yes
